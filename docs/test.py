import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score

# Sample data: replace this with your actual data
# Assuming you have two lists, degree_population and avg_age_of_mothers
degree_population = np.array([16.798240473252022, 10.042636056164806, 8.930100699878924, 11.364034108396146, 10.353260180938141, 17.988113756930318, 13.987296649167153, 22.23708874668735, 10.048622366288493, 16.8358131269798, 11.60526122578838, 7.002889868179767, 14.155754883058094, 9.055795317601739, 10.235097887566742, 16.035423308537016, 13.664925868683325, 18.011624418300322, 25.984821420791693, 12.39244852219023, 6.166980998154569, 12.272190996826978, 14.376966955153422, 15.12881997786727, 10.935694970603231, 8.492248326398567, 9.193165638348361, 11.943910894916183, 9.621522350270128, 13.749339814075759, 12.012869431949992, 20.93451467076083, 10.235935728527307, 9.183764895618673, 10.517448856799037, 13.304788220835844, 12.464158967481904, 10.924955468931513, 11.034966099437423, 9.646381632374629, 11.332731648616125, 9.916944586967675, 10.930900224171157, 12.377268939531175, 13.127927194122899, 15.370384159368575, 21.158399151466938, 12.371277041575745, 11.127707941427712, 12.875077219839381, 11.948489809987505, 7.945208490458469, 10.386796108584365, 14.105942818935091, 13.812964140090852, 14.057070138515002, 16.70252806926252, 17.3307752073192, 16.5717555076671, 12.058493167457186, 15.655647797660013, 11.461011425044514, 13.280566908639866, 12.35451582867784, 10.108774878619025, 9.59079862945465, 7.0044232084274665, 9.453051136405936, 9.227870553686953, 13.402257551918215, 7.078041223128931, 12.748077820074933, 7.850183792452192, 14.955265092428235, 17.08064705192826, 9.4047805030464, 13.81049014603538, 12.712915853154183, 11.242076387153013, 18.766936446588474, 13.518104698325079, 8.08278434189811, 16.251229355309118, 13.02408563782337, 20.52707460575301, 15.893311560993343, 18.960772742802124, 15.938014111340577, 9.54018086393427, 10.511608399023686, 7.666027154663518, 12.748046883538736, 11.431438885021935, 11.083619048556011, 14.548350475286782, 7.9018785336494615, 12.63911834828804, 12.68611508481009, 19.6407115950814, 10.208985424768409, 12.213734951925504, 15.446473117435689, 21.282826901512458, 13.983843921988825, 16.494965143299765, 17.66707188358231, 15.205512374533292, 13.065246531174148, 6.6685973549570425, 9.966722773618123, 20.16197916126333, 9.831833781095424, 6.753059011823017, 14.787978893495143, 12.798462861092046, 18.956723058928507, 12.198315736186597, 19.520615411686627, 12.769958548123325, 9.022776295104741, 16.829175524308514, 14.32426703922956, 16.473251039988263, 11.135891570070736, 10.381088147194792, 8.497645293173937, 22.404985908488065, 14.64968831205714, 18.968388152884668, 20.200245553578878, 15.351269956251675, 16.929137956932795, 9.69843207122783, 11.659943578791953, 24.553187511684428, 10.482904275358182, 16.056946804291748, 19.741775825100394, 17.117976501088528, 13.154539459221807, 13.16527839147935, 13.627408571230054, 11.741845173410937, 6.4747277583727145, 15.322000918844417, 14.50196050537472, 9.138561974066421, 7.697463089629615, 10.071179582185604, 12.746605771676252, 12.232085646198263, 11.434416179450446, 16.021189389838373, 13.73823870784769, 7.209207617422332, 21.078822841250993, 17.515158424537226, 11.984081939733116, 11.322372652166028, 15.430850911906674, 7.743316311204566, 11.004878431065222, 21.54046379555135, 14.130936415808362, 18.19429001955242, 9.086737035337311, 16.21785917430058, 8.498526172689424, 15.906218890311047, 8.066767117873729, 19.960016626749272, 12.847464381787388, 9.966409560427753, 8.64605567061996, 14.057287591120629, 12.454709355242557, 13.565296526619141, 14.281548012367132, 11.428931201081589, 15.025029147500856, 14.724131809059793, 23.758827461275416, 14.80160207146505, 13.706290945291592, 10.532238676180976, 13.863781584024517, 10.432644673589959, 8.624035506364962, 14.45236914908928, 8.750864057536525, 12.360858500428348, 9.25577706729978, 14.727378687945514, 13.456258754616071, 14.27970211914208, 15.062948036663219, 15.497882025668586, 21.171524613333357, 17.857396327370683, 11.43968442249869, 7.089843354507652, 13.776684995118746, 16.29939144279488, 10.59120489703966, 15.369169545280084, 11.040472490699129, 9.046374918354017, 10.075095948543645, 20.264324229187665, 17.484656259010585, 13.040076758432356, 21.317721549193823, 13.017211669065624, 12.417142757307337, 12.78636968633317, 12.96267249917944, 8.665100414679367, 12.002640637525346, 10.403975633215774, 13.171685924847603, 19.38552804908967, 12.95994913511378, 8.902752886960505, 7.758628085135586, 8.610462969509848, 11.715228424072963, 16.49091223818591, 13.775534115788135, 22.84168715456369, 8.730560081911433, 10.292096957725915, 13.648924296655506, 10.64170752873655, 13.499193429567702, 8.14794090306044, 8.859227527600739, 14.092229100404285, 11.073585647403595, 9.534782985359092, 14.838083145813167, 14.958661561349171, 12.716251898016306, 6.318449969501925, 21.724841710970914, 14.425713278441481, 14.221156185907462, 14.593420976992434, 11.349648300117234, 13.309860352775086, 8.057633143568598, 8.157371503630197, 11.992357048499718, 14.582966041220669, 10.622442254341461, 16.771472697437527, 9.623609047788596, 12.431813531503998, 14.996556305225603, 11.259212591380333, 12.038374450781493, 17.943597118824325, 8.714103011277759, 11.661142933772679, 12.741425235480207, 12.04161053734471, 14.98933156108993, 13.314293823393763, 10.749481479745485, 15.039907639722191, 8.981284173315492, 14.906697604822883, 15.805633712408932, 8.049104277294743, 10.193022380118204, 13.698506648015845, 22.61572306558664, 8.691340255044278, 10.455573375564517, 10.539588928574725, 10.17088699084287, 10.007972408533943, 11.091654234455492, 10.089508955542955, 5.791893291893293, 17.102994510394577, 11.40283972001067, 8.164083893212796, 10.865317846776247, 13.200675575311793, 11.342050216936576, 13.159448162808769, 23.779781760181585, 9.57449284131038, 12.571119745011512, 9.775066348315796, 15.404671234724084, 12.621424305580947, 14.76969124440419, 17.930393520790158, 8.940664170600684, 19.40519583482389, 15.141016772320567, 5.238041811586073, 14.450586829939843, 9.766508541404468, 14.886657024290677, 12.336859366389334, 9.07946695362266, 12.543541372351532, 16.502345987447445, 18.79803418754821, 16.997496679756548, 12.13012015035995, 12.660649434551624, 14.175650658826092, 17.208988803389623, 10.15282578054102, 5.957272180994768, 18.464475397218713, 8.609200703119257, 14.063151146016988, 10.654728461621222, 9.138948398773685, 12.72367030644593, 18.353095367773996, 10.918123939118814, 18.89402047449727, 11.03529044347283, 14.515673960690375, 9.921364250526617, 21.360056289804287, 19.08824682069708, 10.314276077665406, 8.672491560851615, 15.846246587000461, 16.829082020059147, 5.9572575114455715, 14.030621437168039, 17.675766148472253, 12.967347038197389, 12.599160917672434, 24.063881413188525, 9.806112570875397, 9.671564593863877, 19.92816706485846, 10.173264103649208, 12.719768991264068, 18.131995555054516, 13.024610860795082, 12.691367521800082, 13.031078412251052, 16.493390908791245, 9.80398064771612, 13.273918091641738, 7.440122479694838, 13.077787215387565, 17.035213713347037, 14.509663498204953, 15.930950836318505, 10.898157990766155, 14.49268642028739, 8.677053092555234, 7.019769178773794, 13.465099931131197, 13.519706691109073, 15.833573969772324, 10.886384441196782, 11.881785401605677, 10.236943811967269, 13.145774374341046, 11.710356964618738, 12.635311182142953, 10.611681405555482, 8.843218140948052, 11.380359278886598, 12.072192101916393, 8.134152987273664, 14.86205074107062, 17.390562289158233, 15.680770907890965, 8.914751263307659, 16.149689128596957, 10.78232971372162, 11.698358932081176, 6.453848057411532, 12.253842134161767, 15.135891810108637, 11.502373347809073, 9.351280544537484, 14.077709444874353, 13.909151533805272, 11.076314319250029, 16.444348597211714, 13.648201482934002, 7.500682644037893, 11.812891113892366, 8.225749384940716, 14.082579797415953, 8.398158437847277, 13.15689949322195, 15.257682487369392, 8.718846098644502, 5.71739438246626, 9.55801173507995, 10.203481413084369, 18.295815577279743, 13.842542311869476, 9.080178494314092, 13.832859785026939, 13.141233114885651, 9.401815245378039, 11.303031345697278, 13.348332881539712, 7.944060493489595, 15.393866304875804, 26.41487602732039, 7.66095010308595, 5.265908080579624, 14.029394650130836, 20.108978977012246, 11.852465511652198, 14.737500883240633, 12.196724123919855, 18.405881878961463, 15.359196085822083, 15.464294914381007, 12.382928203959755, 16.02513591822922, 16.50826008683681, 16.376121652167956, 11.926770978942148, 7.56409101305038, 13.462940178316316, 17.93119048797212, 8.64386551718723, 12.961228951348133, 17.72937719805903, 12.983766088165389, 11.541001268528333, 12.066573758832732, 11.354282193468885, 11.294016025049826, 14.8370781858884, 12.120299507334803, 19.96213803117762, 15.374204250783025, 10.156113551784825, 12.474835154982843, 16.350960102826427, 10.609870931389047, 8.015723486958644, 19.22163669906169, 11.31255747115739, 7.521409170073183, 12.963443737705575, 17.128296144522626, 13.224313757872372, 9.186880570887292, 11.722037502590581, 14.28445311214642, 14.458872618819912, 7.119495822163813, 10.01782121606421, 11.399227301996136, 14.353783424995258, 16.716217168256083, 13.150818478961268, 9.603945846830097, 14.132727897465076, 12.12200534911512, 10.713937768787897, 16.3913073761928, 13.35304422347411, 9.787916171114935, 12.64931883143398, 14.98193675083832, 11.352045614544204, 14.198923454444708, 10.500744187637931, 13.145620839917635, 20.430330516138245, 9.025233474803409, 5.394837503187601, 13.73157145480543, 11.363636363636363, 12.375020124466355, 15.016096715369548, 13.912115122371349, 13.194020426854653, 11.382547530399107, 13.525171200966227, 15.293173975740851, 10.912351058496895, 21.228234508126988, 11.858099245022688, 14.482481697295682, 17.8556113423982, 11.375920387333862, 8.994556858759179, 18.491188505811245, 18.091111068381373, 13.698768666239689, 11.10382640107471, 15.1649286764651, 12.843871969763281, 15.901402178092386, 19.789479521388547, 9.133688093242968, 9.266161161804396, 8.615796057455896, 10.050757678174199, 11.8479398310987, 16.3695849879168, 13.099892106996231, 13.912351848916792, 23.786181249145695, 17.583654165838762, 14.27052780234958, 10.242213346589644, 9.575252511199531, 13.10192285006488, 11.479954287126267, 9.9495102395578, 14.764820977477516, 13.040494166094716, 7.116469701703762, 5.906661457473246, 11.176981699038793, 14.279865926361845, 12.116836386726558, 14.937901456411886, 10.736834488123451, 13.974187805963506, 5.767545684620694])
avg_age_of_mothers = np.array([29.6, 28.81, 28.48, 27.81, 28.35, 31.61, 30.1, 31.92, 28.46, 30.12, 27.89, 27.23, 29.11, 27.42, 28.5, 30.55, 30.08, 29.85, 32.6, 28.77, 27.11, 28.97, 28.01, 29.92, 28.47, 27.39, 27.83, 28.86, 27.13, 28.32, 28.53, 32.25, 28.43, 27.56, 28.25, 29.46, 28.67, 28.1, 28.25, 26.92, 28.31, 27.9, 27.63, 27.92, 29.21, 29.19, 31.26, 28.98, 28.32, 28.86, 29.56, 29.22, 28.53, 30.35, 28.95, 28.21, 31.02, 29.69, 30.53, 28.6, 29.93, 28.78, 29.44, 28.15, 26.99, 26.98, 26.67, 27.2, 28.08, 29.59, 26.83, 28.34, 27.71, 30.19, 29.49, 28.22, 30.06, 28.91, 29.47, 30.02, 28.56, 27.28, 29.75, 29.09, 31.29, 29.93, 30.92, 30.22, 27.93, 28.85, 26.53, 29.21, 28.68, 28.37, 29.08, 27.77, 28.51, 28.4, 30.23, 27.34, 28.18, 29.43, 30.65, 29.54, 28.89, 31.06, 30.05, 28.65, 27.54, 26.94, 31.2, 27.22, 27.81, 29.4, 28.86, 30.6, 28.48, 30.79, 28.7, 27.41, 29.23, 29.18, 29.56, 28.74, 28.02, 27.4, 31.54, 30.41, 30.03, 30.26, 30.01, 30.85, 27.04, 28.55, 31.38, 28.58, 29.26, 31.2, 29.91, 30.54, 28.45, 28.15, 28.38, 26.45, 30.5, 28.47, 27.09, 27.28, 28.08, 29.56, 27.96, 27.59, 30.39, 30.31, 26.51, 31.72, 31.5, 28.73, 27.73, 29.16, 27.28, 28.62, 31.08, 28.67, 30.91, 27.89, 29.25, 28.21, 30.26, 28.43, 30.02, 28.54, 27.85, 27.6, 30.34, 27.63, 28.81, 28.92, 28.66, 28.82, 29.89, 31.16, 28.8, 28.47, 28.55, 31.45, 27.73, 27.33, 30.15, 28.4, 28.82, 27.52, 30.06, 28.77, 29.41, 28.24, 29.53, 30.91, 30.1, 28.65, 26.99, 28.97, 29.85, 27.07, 29.7, 28.08, 27.04, 27.65, 31.64, 31.08, 29.38, 32.36, 28.79, 28.66, 28.62, 28.11, 27.47, 28.72, 26.73, 28.44, 30.8, 28.6, 28.36, 26.74, 27.02, 28.55, 30.63, 28.27, 30.65, 27.36, 28.84, 28.68, 27.29, 29.63, 27.94, 28.4, 30.76, 28.61, 28.26, 28.88, 30.25, 28.58, 27.84, 31.57, 30.39, 28.93, 28.73, 28.46, 29.47, 27.51, 28.35, 28.94, 28.42, 28.48, 30.2, 28.12, 29.41, 29.37, 28.83, 29.1, 30.1, 27.94, 28.18, 28.57, 28.76, 28.73, 28.41, 28.35, 28.89, 28.03, 30.58, 30.34, 27.37, 28.35, 30.4, 31.94, 27.2, 27.34, 27.71, 28.2, 27.79, 29.26, 27.05, 28.23, 28.65, 28.42, 26.67, 27.9, 28.56, 28.86, 28.69, 33.34, 27.38, 28.2, 28.32, 29.61, 29.61, 30.35, 29.06, 27.49, 29.7, 30.06, 27.98, 30.22, 27.85, 29.88, 27.89, 28.09, 30.24, 31.01, 32.15, 30.8, 27.56, 28.53, 28.93, 29.63, 27.25, 27.09, 31.58, 28.51, 29.45, 29.09, 28.87, 27.48, 31.77, 27.96, 31.35, 27.1, 28.95, 26.91, 32.39, 30.86, 27.32, 26.91, 30.83, 31.75, 27.14, 29.45, 29.64, 30.06, 29.74, 32.55, 27.74, 28.89, 32.39, 27.65, 29.59, 30.57, 29.58, 28.22, 28.07, 30.36, 28.51, 29.37, 26.26, 29.62, 30.98, 29.65, 31.2, 29.74, 29.09, 28.64, 28.14, 29.15, 29.47, 30.06, 28.62, 29.52, 28.73, 27.95, 28.48, 27.86, 28.82, 27.11, 28.85, 28.36, 27.81, 29.36, 30.99, 31.18, 27.65, 28.96, 28.97, 28.86, 26.66, 29.66, 30.11, 29.27, 27.24, 28.06, 30.72, 28.3, 29.62, 28.16, 27.65, 29.56, 26.86, 28.81, 27.22, 30.78, 28.57, 28.93, 26.36, 27.95, 28.17, 30.93, 29.94, 27.61, 28.61, 29.6, 27.41, 27.95, 29.02, 28.67, 30.31, 33.31, 28.89, 27.5, 30.08, 32.38, 28.62, 28.62, 29.15, 31.69, 30.64, 28.78, 28.6, 29.3, 30.74, 29.43, 29.35, 27.87, 28.55, 30.74, 26.81, 27.98, 29.95, 27.65, 28.86, 27.7, 28.91, 27.72, 30.32, 29.57, 31.77, 30.73, 27.69, 28.63, 30.18, 28.05, 28.0, 30.81, 27.85, 27.85, 29.09, 29.63, 28.67, 28.6, 29.27, 29.12, 29.48, 28.52, 27.87, 29.17, 29.53, 31.15, 30.85, 27.36, 28.62, 28.53, 28.47, 30.9, 28.67, 26.95, 28.63, 29.13, 28.31, 30.85, 27.03, 30.49, 30.06, 27.29, 27.82, 28.13, 27.43, 29.83, 29.74, 30.84, 28.43, 27.25, 30.08, 29.21, 28.21, 30.6, 29.17, 30.3, 29.88, 27.89, 28.24, 30.79, 30.49, 29.33, 28.32, 30.32, 28.84, 30.93, 31.16, 28.23, 27.29, 28.33, 27.78, 28.46, 31.86, 29.2, 30.01, 31.54, 30.19, 28.94, 29.25, 27.92, 29.27, 28.83, 27.55, 30.11, 29.86, 27.26, 27.93, 27.7, 28.39, 30.25, 29.47, 28.48, 29.02, 27.06])

# Reshape the data to fit the model
degree_population = degree_population.reshape(-1, 1)

# Create and fit the model
model = LinearRegression()
model.fit(degree_population, avg_age_of_mothers)

# Get the R2 value
r2 = r2_score(avg_age_of_mothers, model.predict(degree_population))
print(f'R2 value: {r2}')

# Predict average age of mothers for degree populations from 1 to 40
degree_population_range = np.arange(1, 41).reshape(-1, 1)
predicted_ages = model.predict(degree_population_range)

# Create a DataFrame for predictions
predictions_df = pd.DataFrame({
    'Degree_Population': degree_population_range.flatten(),
    'Predicted_Avg_Age_of_Mothers': predicted_ages
})

print(predictions_df)

# Plot the original data and the line of best fit
plt.scatter(degree_population, avg_age_of_mothers, color='blue', label='Actual data')
plt.plot(degree_population_range, predicted_ages, color='red', label='Line of Best Fit')
plt.xlabel('College Degree Population (%)')
plt.ylabel('Average Age of Mothers')
plt.title('Linear Regression: College Degree Population vs Average Age of Mothers')
plt.legend()
plt.show()
